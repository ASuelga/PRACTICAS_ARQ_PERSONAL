//////////////FALTA TERMINAR////////////
VERIFICAR Y DESCRIBIR LINEA A LINEA, NO TERMINO DE ENTENDER
/////////                
                CONT     EQU  10H
                COMP     EQU  11H
                EOI_0    EQU  20H
                IMR_1    EQU  21H
                ISR_2    EQU  22H
                IRR_3    EQU  23H
                F10_4    EQU  24H
                TIMER_5  EQU  25H
                N_CLK    EQU  10
                
                ORG 40
                DIR_SUB  DW SUB_RUT
                ORG 80
                DIR_F10  DW  SUB_F10
                
                ORG 1000H
               SEG_U  DB  30H  ;30H=0, COMIENZA EN 0 MIN 00:01
               SEG_D  DB  30H  ;30H=0, COMIENZA EN 0 MIN 00:10
               FIN  DB  ?
                        
                ORG 3000H
        SUB_RUT:PUSH AX
                ; //////SEGUNDOS A 30/////
                INC SEG_D        ;  
                CMP SEG_D, 3AH   ;  
                JNZ IMPRIMIR     ;  
                MOV SEG_D, 30H   ;  0:
                INC SEG_U
                CMP SEG_U, 33H
                JNZ IMPRIMIR

                MOV DL, 1
                MOV AL, 0FFH
                OUT EOI_0,AL
                MOV AL, 2        ;CARACETRES DEL CONTADOR
                INT 7            ;IMPRIMO
                MOV AL, 0        ;CONTADOR A CERO
                OUT TIMER_5, AL
                MOV AL, EOI_0
                OUT EOI_0, AL
                POP AX
                IRET
                
                ORG 3500H
        SUB_F10:PUSH AX        ;PUSHEO AX
                IN AL, IMR_1   ;TOMO VALOR DEL IRM
                XOR AL, 00000010B;XOR PARA QUE SOLO SE CAMBIE EL SEGUNDO BIT A 1
;                                 DE ESA FORMA NO SE CAMBAIA EL BIT DEL TIMER DE ESTADO                  
                OUT IMR_1, AL    ;
                MOV AL, EOI_0
                OUT EOI_0, AL
                POP AX
                IRET
                
       IMPRIMIR:INT 7
                MOV AL, 0
                OUT TIMER_5, AL
                MOV AL, EOI_0
                OUT EOI_0, AL
                POP AX
                IRET
                
                ;CONFIGURO PIC
                ORG 2000H
                CLI
                MOV AL, 0FDH
                OUT IMR_1, AL ; PIC: registro IMR
                MOV AL, N_CLK
                OUT CONT, AL ; PIC: registro INT1
                MOV AL, 1
                OUT COMP, AL ; TIMER: registro COMP
                MOV AL, 0
                OUT CONT, AL ; TIMER: registro CONT
                MOV BX, OFFSET SEG_U
                MOV DL, 0
                STI
          LAZO: CMP DL,0
                JMP LAZO
                END

              
