Escribir un programa para imprimir la letra “A” utilizando la impresora a través de la PIO

        PA_30
        PB_31
        CA_32
        CB_33

        ORG 1000H
        LETRA_A     DB  'A'
        FIN         DB  ?

        ORG 2000H   ///EL PRIMER FRAGMENTO VA SIEMPRE*///
      * MOV AL, 11111101b           ///PONGO STROBE EN 0, BUSY EN 1
      * OUT CA_32, AL               ///PONGO AL EN CA_32
      * MOV AL, 0                   ///TODO DE SALIDA
      * OUT CB, AL                  ///PONGO AL EN CB

        MOV BX, OFFSET LETRA_A      ///ME PONGO EN LA DIR DE LETRA_A PARA RECOR
                            
                    /////CONSULTA DE ESTADO A VER SI ESTA LIBRE
   POLL:IN AL, PA                   ///PONGO EN AL EL ESTADO DE PA PARA SABER SI ESTA LIBRE
        AND AL, 1                   ///HAGO AND PARA PONER 1 EN STROBE Y AVISAR QUE DEJE UN CARACTER
        JNZ POLL                    ///SI NO ESTA LIBRE VUELVO A PREGUNTAR
                    ////SE LIBERO LA IMPRESORA
        MOV AL, [BX]
        OUT PB, AL                  ///PONGO EL CARACTER EN PB

                    ////PONGO STROBE EN 1 PARA QUE SEPA QUE DEJE UN CARACTER
        IN AL, PA                   ///PONGO EN AL EL ESTADO DE PA PARA SABER SI ESTA LIBRE 
        OR AL, 2                    ///HAGO OR 2 PARA FORZAR STROBE EN 1
        OUT CA_32, AL               ///PONGO AL EN CA_32
                    ////PONGO STROBE EN 0 SIEMPRE EN IMP POR PIO*
      * IN AL, PA                   ///PONGO EN AL EL ESTADO DE PA PARA SABER SI ESTA LIBRE
      * AND AL, 0FDH                ///HAGO AND 0FDH PARA FORZAR STROBE EN 0
      * OUT CA_32, AL               ///PONGO AL EN CA_32

        INC BX                      ///INCREMENTO BX PARA PASAR AL SIGUIENTE CARACTER
        CMP BX, OFFSET FIN          ///COMPARO BX CON FIN PARA SABER SI LLEGUE AL FINAL  
        JNZ POLL                    ///SI NO LLEGUE AL FINAL VUELVO A PREGUNTAR

        INT 0
        END
/////////////////////////ALTERNATIVA MAS INTUITIVA//////////////////
/////////////////////////ALTERNATIVA MAS INTUITIVA//////////////////
ARMAR 4 SUBRUTINAS 
PIO
POLL
STROBE0
STROBE1

        PA_30
        PB_31
        CA_32
        CB_33

        ORG 1000H
        LETRA_A     DB  'A'
        FIN         DB  ?

        ORG 3000H
    PIO:MOV AL, 11111101b
        OUT CA_32, AL
        MOV AL,0
        OUT CB_33, AL
        RET

        ORG 3100H
   POLL:IN AL, PA           /// LEOO EL ESTADO DE PA
        AND AL, 1           ///HAGO AND 1 PARA SEPARAR SOLO EL BITE DE STROBE 
        JNZ POLL            ///SI STROBE ES 1 VUELVO A PREGUNTAR, 0 ESTA LIBRE PUEDO ENVIAR
        RET

        ORG 3200H
STROBE1:MOV AL, PA_30       ///PONGO EN AL EL ESTADO DE PA
        OR AL, 02H          ///HAGO OR 2 PARA FORZAR STROBE EN 1
        OUT PA_30, AL       ///PONGO AL EN PA_30 (PASO DE 0 A 1 STROBE)
        RET

        ORG 3300H
STROBE0:MOV AL, PA_30       ///PONGO EN AL EL ESTADO DE PA
        AND AL, 0FDH        ///HAGO AND 0FDH PARA FORZAR STROBE EN 0
        OUT PA_30, AL       ///PONGO AL EN PA_30 (PASO DE 1 A 0 STROBE)
        RET

        ORG 2000H
        CALL PIO            ///CONF CA_32 Y CB_33 EN 1111 1101 (STROBE EN 0 Y BUSY EN 1)

        MOV AL, LETRA_A     ///PONGO EN AL EL CARACTER A IMPRIMIR
        OUT PB_31,AL
        
        CALL POLL           ///CONSULTO SI ESTA LIBRE PARA ENVIAR EL CARACTER
        CALL STROBEA1       ///PONGO STROBE EN 1 PARA QUE SEPA QUE DEJE UN CARACTER
        CALL STROBEA0       ///PONGO STROBE EN 0 PARA LIBERAR LA IMPRESORA

        INT 0
        END

